window.tabs=function(a){var t=[],n={animationSpeed:180,scrollTo:!0,scrollToOffset:0,pagination:!0,reloadAjax:!1,cacheAjax:!1,template:{container:{atts:{},classes:["container"]},nav:{links:{activeClass:"active"}},tab:{container:{classes:["tab"]},ajaxContainer:{classes:["ajax-container"]}},pagination:{container:{atts:{},classes:[]},links:{prev:{atts:{},classes:[],preHtml:"",postHtml:""},next:{atts:{},classes:[],preHtml:"",postHtml:""}}}}},e=function(){return!!window.navigator.userAgent.match("IE 8")},i=function(a){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=0;e<a;e++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},s=function(t){var e=t.find("."+n.template.tab.container.classes.join(".")).length,i=t.find("nav");t.find("."+n.template.tab.container.classes.join(".")).each(function(t){var s,o,l,r=a(this),c=a("<nav/>").addClass(n.template.pagination.container.classes.join(" "));for(var d in n.template.pagination.container.atts)c.attr(d,n.template.pagination.container.atts[d]);0!==t&&(o="#"===(s=i.find("a").eq(t-1)).attr("href").charAt(0)?s.attr("href"):"#"+s.attr("data-tab-id"),a("<a/>").addClass("prev").addClass(n.template.pagination.links.prev.classes.join(" ")).attr("href",o).html(n.template.pagination.links.prev.preHtml+s.html()+n.template.pagination.links.prev.postHtml).appendTo(c)),t!==e-1&&(l="#"===(s=i.find("a").eq(t+1)).attr("href").charAt(0)?s.attr("href"):"#"+s.attr("data-tab-id"),a("<a/>").addClass("next").addClass(n.template.pagination.links.next.classes.join(" ")).attr("href",l).html(n.template.pagination.links.next.preHtml+s.html()+n.template.pagination.links.next.postHtml).appendTo(c)),r.append(c)})};return{initTabs:function(o){return a.extend(!0,n,o),this.each(function(){t.push(this);var o=a(this),l=o.find("."+n.template.tab.container.classes.join(".")).first(),r=l.get(0).nodeName,c=i(4),d=1;o.find("nav").first().find("a").each(function(){var t=a(this),e=o.find("."+n.template.tab.container.classes.join(".")).last();if("#"!==t.attr("href").charAt(0)){var i=t.attr("data-tab-id")||"tab-"+c+"-"+d,s=a("<"+r+"/>").html('<div class="'+n.template.tab.ajaxContainer.classes.join(" ")+'"></div>').attr("id",i).addClass(n.template.tab.container.classes.join(" "));d++,t.attr("data-tab-id",i),e.after(s)}}),o.find("."+n.template.tab.container.classes.join(".")).wrapAll(a('<div class="'+n.template.container.classes.join(" ")+'"/>').css("height",l.outerHeight(!0)).css("clear","both"));var f=o.find("."+n.template.container.classes.join(".")).first();o.find("."+n.template.tab.container.classes.join(".")).hide().first().show(),o.find("nav li").first().addClass(n.template.nav.links.activeClass),e()&&o.find("*").css("filter","inherit"),o.find("nav").first().find("a").on("click",function(t){var e=a(this);e.parent("li").hasClass(n.template.nav.links.activeClass)?t.preventDefault():"#"!==e.attr("href").charAt(0)&&(t.preventDefault(),window.location.hash=e.attr("data-tab-id"))}),n.pagination&&s(o),f.css("height","auto")})},toggleTab:function(e){a.each(t,function(){var t=a(this);if(t.find(e).length>0&&t.find(e).is("."+n.template.tab.container.classes.join("."))){var i=t.find("."+n.template.container.classes.join(".")),s=t.find("nav ."+n.template.nav.links.activeClass),o=t.find("."+n.template.tab.container.classes.join(".")+":visible"),l=0!==t.find("nav").first().find('a[href="'+e+'"]').length?t.find("nav").first().find('a[href="'+e+'"]'):t.find('nav a[data-tab-id="'+e.replace("#","")+'"]'),r=t.find(e);n.scrollTo&&a("html, body").animate({scrollTop:t.offset().top+parseInt(n.scrollToOffset)}),s.removeClass(n.template.nav.links.activeClass),l.parent("li").addClass(n.template.nav.links.activeClass),o.parent().css("height",o.outerHeight(!0)+"px"),o.fadeOut(n.animationSpeed,function(){"#"!==l.attr("href").charAt(0)&&(n.reloadAjax||""===r.find("."+n.template.tab.ajaxContainer.classes.join(".")).html())&&a.ajax({url:l.attr("href"),cache:n.cacheAjax,success:function(a){r.find("."+n.template.tab.ajaxContainer.classes.join(".")).html(a)},error:function(a,t,n){window.console.log("Error: "+n)}}),r.css({filter:"alpha(opacity=0)",zoom:"1",opacity:"0"}),r.show(),n.onTabChange&&"function"==typeof n.onTabChange&&n.onTabChange.call(),i.animate({height:r.outerHeight(!0)+"px"},{complete:function(){r.fadeTo(n.animationSpeed,1),r.parent().css("height","auto")},duration:n.animationSpeed})})}})}}}(jQuery),jQuery.fn.tabs=function(a){window.tabs.initTabs.apply(this,[a])},window.addListener=function(a,t,n){a.addEventListener?a.addEventListener(t,n):a.attachEvent&&a.attachEvent("on"+t,n)},window.addListener(window,"hashchange",function(){window.tabs.toggleTab(location.hash)}),window.addListener(window,"load",function(){""!==location.hash&&window.tabs.toggleTab(location.hash)});